/* Thiết lập cơ bản và chuyển động */
* {
    transition: all 0.2s linear;
    box-sizing: border-box; /* Rất quan trọng cho responsive */
}
.text-center {text-align: center;}

/* Tối ưu hóa layout chính */
#chess {
    width: 100%;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 10px 0;
    background: #f4f4f4;
}

/* Vùng chứa board và panels (Mặc định cho MOBILE: xếp dọc) */
#wrap {
    display: flex;
    flex-direction: column; /* Xếp theo cột (điện thoại) */
    gap: 10px;
    width: 95%; /* Chiếm 95% chiều rộng màn hình */
    max-width: 850px; /* Giới hạn tối đa cho màn hình lớn */
    align-items: center;
}

/* BÀN CỜ */
#chess-board {
    border: solid 3px black;
    display: flex;
    flex-wrap: wrap;
    width: 100%; /* Chiếm toàn bộ chiều rộng #wrap */
    max-width: 600px;
    aspect-ratio: 1 / 1; /* Luôn giữ tỉ lệ 1:1 (hình vuông) */
    order: 2; /* Đặt ở giữa trên điện thoại */
}

/* Kích thước ô cờ */
.square {
    width: 12.5%; /* 1/8 chiều rộng của bàn cờ */
    height: 12.5%; /* 1/8 chiều cao của bàn cờ */
    display: flex; 
    align-items: center; 
    justify-content: center;
    padding: 0;
    margin: 0;
}

/* Màu ô cờ */
.square.white {background-color: #f0d9b5;}
.square.black {background-color: #b58863;}

/* Highlight trạng thái */
.square.piece-selected {background-color: #ffeb3b !important;}
.square.square-selected {background-color: #ff9800 !important;}
.square.capturable-selected {background-color: #f44336 !important;}

/* Định dạng quân cờ */
.chess-piece {
    cursor: pointer;
    width: 100%; height: 100%;
    display: flex; align-items: center; justify-content: center;
}
.chess-piece i {
    font-size: 2.5rem; 
    line-height: 1;
}
.chess-piece i.black {color: #000000 !important;} 
.chess-piece i.white {color: #FFFFFF !important;} 

/* BẢNG ĐIỀU KHIỂN QUÂN BỊ BẮT (PANELS) */
.chess-panel {
    padding: 10px;
    width: 100%; /* Chiếm toàn bộ chiều rộng trên điện thoại */
    max-width: 600px; /* Giới hạn tối đa */
    order: 1; /* Panel trắng ở trên */
}
#black-panel {order: 3;} /* Panel đen ở dưới */

.chess-panel.white {background: #fff; border: solid 1px black;}
.chess-panel.black {background: #000; border: solid 1px white;}
.white-text {color: white;}
.taken-pieces {
    padding: 5px; 
    min-height: 50px; 
    border: dashed 1px gray; 
    display: flex; flex-wrap: wrap;
}

.taken-pieces .chess-piece {
    margin: 5px;
    width: 25px; height: 25px; /* Kích thước nhỏ cho quân bị bắt */
}
.taken-pieces .chess-piece i {
    font-size: 1rem;
}

/* MEDIA QUERY: Điều chỉnh cho màn hình LỚN hơn (~ PC/Tablet ngang) */
@media screen and (min-width: 700px) {
    #wrap {
        flex-direction: row; /* Chuyển sang xếp ngang */
        width: 850px; /* Chiều rộng phù hợp với 3 cột (Panel + Board + Panel) */
        justify-content: space-between;
        align-items: flex-start;
    }
    
    .chess-panel {
        width: 120px; /* Chiều rộng cố định cho panel trên PC */
        max-width: 150px;
        order: initial; /* Bỏ sắp xếp thứ tự 1, 3 */
    }
    
    #chess-board {
        width: 600px; /* Giữ nguyên kích thước lớn */
        height: 600px;
        order: initial; /* Bỏ sắp xếp thứ tự 2 */
    }
}
