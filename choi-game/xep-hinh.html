<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√≤ Ch∆°i X·∫øp H√¨nh (Tetris)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }
        /* ƒê·ªãnh nghƒ©a k√≠ch th∆∞·ªõc v√† b·ªë c·ª•c cho b·∫£ng Tetris */
        .tetris-grid {
            /* Tetris chu·∫©n th∆∞·ªùng l√† 10 c·ªôt x 20 h√†ng */
            display: grid;
            grid-template-columns: repeat(10, 1fr); 
            grid-template-rows: repeat(20, 1fr);
            border: 4px solid #374151; /* Vi·ªÅn ngo√†i */
            background-color: #000000; /* N·ªÅn t·ªëi */
            width: 300px; /* Chi·ªÅu r·ªông c·ªë ƒë·ªãnh (v√≠ d·ª•: 30px/c·ªôt * 10 c·ªôt) */
            height: 600px; /* Chi·ªÅu cao c·ªë ƒë·ªãnh (v√≠ d·ª•: 30px/h√†ng * 20 h√†ng) */
        }
        /* K√≠ch th∆∞·ªõc √¥ (cell) */
        .grid-cell {
            width: 100%;
            height: 100%;
            border: 1px solid #1f2937; /* Vi·ªÅn √¥ nh·ªè ƒë·ªÉ d·ªÖ nh√¨n */
        }
        /* ƒê·ªãnh nghƒ©a m√†u cho c√°c kh·ªëi Tetris (v√≠ d·ª•, s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS) */
        .shape-i { background-color: #00FFFF; } /* Cyan */
        .shape-o { background-color: #FFFF00; } /* Yellow */
        .shape-t { background-color: #800080; } /* Purple */
        .shape-j { background-color: #0000FF; } /* Blue */
        .shape-l { background-color: #FFA500; } /* Orange */
        .shape-s { background-color: #00FF00; } /* Green */
        .shape-z { background-color: #FF0000; } /* Red */
        
        .game-over-overlay {
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            z-index: 10;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'game-primary': '#4CAF50',
                        'game-default': '#2196F3',
                        'gray-bg': '#f3f4f6'
                    }
                }
            }
        }
        
        // C·∫•u h√¨nh tr√≤ ch∆°i
        const GRID_WIDTH = 10;
        const GRID_HEIGHT = 20;
        let score = 0;
        let gameActive = false;
        let boardState = []; // M·∫£ng 2D l∆∞u tr·ªØ tr·∫°ng th√°i c√°c √¥ ƒë√£ c·ªë ƒë·ªãnh

        // C√°c ph·∫ßn t·ª≠ DOM
        const gameBoard = document.getElementById('gameBoard');
        const scoreElement = document.getElementById('score');
        const nextShapeElement = document.getElementById('nextShape');
        const overlayElement = document.getElementById('gameOverOverlay');

        // ------------------------------------
        // LOGIC KH·ªûI T·∫†O V√Ä V·∫º
        // ------------------------------------

        function createEmptyBoard() {
            // Kh·ªüi t·∫°o m·ªôt m·∫£ng 2D 20x10, t·∫•t c·∫£ ƒë·ªÅu l√† null (tr·ªëng)
            boardState = Array(GRID_HEIGHT).fill(0).map(() => Array(GRID_WIDTH).fill(null));
        }

        function renderBoard() {
            gameBoard.innerHTML = '';
            
            // V·∫Ω c√°c √¥ d·ª±a tr√™n boardState
            for (let r = 0; r < GRID_HEIGHT; r++) {
                for (let c = 0; c < GRID_WIDTH; c++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    
                    const cellType = boardState[r][c]; // V√≠ d·ª•: 'i', 'o', 't', ho·∫∑c null
                    
                    if (cellType) {
                        cell.classList.add(`shape-${cellType}`);
                    }
                    
                    gameBoard.appendChild(cell);
                }
            }
            
            // TODO: Th√™m logic v·∫Ω kh·ªëi ƒëang r∆°i (current piece) l√™n tr√™n boardState
        }

        function initGame() {
            score = 0;
            scoreElement.textContent = score;
            gameActive = true;
            overlayElement.classList.add('hidden');
            
            createEmptyBoard();
            renderBoard();
            
            // TODO: Kh·ªüi t·∫°o kh·ªëi ƒë·∫ßu ti√™n v√† b·∫Øt ƒë·∫ßu v√≤ng l·∫∑p game
            // if (gameLoopInterval) clearInterval(gameLoopInterval);
            // gameLoopInterval = setInterval(gameLoop, 1000); // Kh·ªëi r∆°i m·ªói 1 gi√¢y
        }
        
        // ------------------------------------
        // CH·ª®C NƒÇNG CH√çNH (C·∫¶N TH√äM LOGIC ƒê·∫¶Y ƒê·ª¶)
        // ------------------------------------
        
        function gameLoop() {
            if (!gameActive) return;

            // 1. R∆°i kh·ªëi: Di chuy·ªÉn kh·ªëi ƒëang r∆°i xu·ªëng 1 √¥
            // 2. Ki·ªÉm tra va ch·∫°m: N·∫øu va ch·∫°m (v·ªõi ƒë√°y ho·∫∑c kh·ªëi kh√°c):
            //    a. C·ªë ƒë·ªãnh kh·ªëi v√†o boardState
            //    b. Ki·ªÉm tra v√† x√≥a h√†ng
            //    c. Sinh kh·ªëi ti·∫øp theo
            // 3. Ki·ªÉm tra Game Over (N·∫øu kh·ªëi m·ªõi kh√¥ng th·ªÉ sinh)
            
            // renderBoard();
        }

        function endGame() {
            gameActive = false;
            // clearInterval(gameLoopInterval);
            overlayElement.classList.remove('hidden');
        }
        
        // TODO: Th√™m h√†m x·ª≠ l√Ω ph√≠m b·∫•m (di chuy·ªÉn ngang, xoay, r∆°i nhanh)
        // document.addEventListener('keydown', handleKeydown);


        // B·∫Øt ƒë·∫ßu tr√≤ ch∆°i khi t·∫£i trang
        window.onload = initGame;
    </script>
</head>
<body class="bg-gray-bg flex flex-col items-center pt-8 px-4">

    <h1 class="text-3xl md:text-4xl font-extrabold text-purple-600 mb-6">
        X·∫øp H√¨nh (Tetris) üß±
    </h1>

    <div class="flex flex-col md:flex-row gap-6 p-4 bg-white rounded-xl shadow-2xl">
        
        <div class="md:w-48 p-4 bg-gray-100 rounded-lg shadow-inner flex flex-col items-center">
            
            <h2 class="text-xl font-bold text-gray-700 mb-4">ƒêI·ªÇM S·ªê</h2>
            <p id="score" class="text-4xl font-extrabold text-game-default mb-8">0</p>
            
            <h2 class="text-xl font-bold text-gray-700 mb-4">KH·ªêI TI·∫æP THEO</h2>
            <div id="nextShape" class="grid grid-cols-4 grid-rows-4 w-24 h-24 border border-gray-400 bg-gray-200">
                </div>
            
            <p class="text-xs text-gray-500 mt-6">D√πng ph√≠m m≈©i t√™n ƒë·ªÉ ch∆°i.</p>
        </div>

        <div class="relative">
            <div id="gameBoard" class="tetris-grid">
                </div>
            
            <div id="gameOverOverlay" class="game-over-overlay absolute inset-0 flex flex-col items-center justify-center hidden">
                <p class="text-4xl font-extrabold mb-4">GAME OVER</p>
                <button onclick="initGame()"
                        class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg 
                               transition duration-150 ease-in-out shadow-lg">
                    Ch∆°i L·∫°i
                </button>
            </div>
        </div>
    </div>

    <div class="mt-8 text-center">
        <button onclick="initGame()"
                class="bg-game-primary hover:bg-green-600 text-white font-medium py-2 px-6 rounded-full 
                       transition duration-150 ease-in-out shadow-md mr-4">
            B·∫Øt ƒë·∫ßu / Reset Game
        </button>
        <a href="menu-game.html" 
           class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-full 
                  text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out">
            ‚Üê Tr·ªü v·ªÅ Menu Tr√≤ Ch∆°i
        </a>
    </div>

</body>
</html>
