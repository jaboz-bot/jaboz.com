<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ƒê·ªïi Ti·ªÅn T·ªá - JABOZ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .logo {
            font-size: 42px;
            font-weight: 900;
            background: linear-gradient(135deg, #fff 0%, #f0f0f0 50%, #fff 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 3px;
            margin-bottom: 10px;
            animation: gradientShift 3s ease infinite;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-top: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .exchange-box {
            margin-bottom: 25px;
        }
        
        .currency-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .flag-select {
            position: relative;
            width: 60px;
            height: 50px;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }
        
        .flag-select:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }
        
        /* ·∫®n ho√†n to√†n t·∫•t c·∫£ select elements */
        select {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            width: 0 !important;
            height: 0 !important;
            position: absolute !important;
            left: -9999px !important;
        }
        
        .flag-icon {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            pointer-events: none;
        }
        
        .currency-code {
            font-weight: bold;
            color: #333;
            font-size: 18px;
            min-width: 60px;
        }
        
        .amount-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 24px;
            font-weight: 600;
            text-align: right;
            transition: all 0.3s ease;
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }
        
        .amount-input::-webkit-outer-spin-button,
        .amount-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .amount-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .swap-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px auto;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .swap-button:hover {
            transform: rotate(180deg) scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .result-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }
        
        .result-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .result-amount {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .result-rate {
            font-size: 12px;
            color: #999;
            margin-top: 10px;
        }
        
        .rate-info {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }
        
        .rate-info strong {
            color: #667eea;
        }
        
        .currency-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .currency-item {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .currency-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        
        .currency-item.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .currency-item .flag {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .currency-item .code {
            font-size: 12px;
            font-weight: 600;
        }
        
        .back-button {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #9C27B0, #7B1FA2);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.4);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .back-button:hover {
            transform: translateX(-50%) translateY(-2px);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.6);
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
        }
        
        .error {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }
        
        @media (max-width: 600px) {
            body {
                padding: 10px 5px;
            }
            
            .header {
                margin-bottom: 20px;
            }
            
            .logo {
                font-size: 32px;
                letter-spacing: 2px;
            }
            
            .header h1 {
                font-size: 20px;
                margin-top: 5px;
            }
            
            .container {
                padding: 20px 15px;
                border-radius: 15px;
                margin-bottom: 80px;
            }
            
            .currency-selector {
                flex-wrap: wrap;
                gap: 8px;
                margin-bottom: 12px;
            }
            
            .flag-select {
                width: 50px;
                height: 45px;
            }
            
            .flag-icon {
                font-size: 28px;
            }
            
            .currency-code {
                font-size: 16px;
                min-width: 50px;
            }
            
            .amount-input {
                font-size: 18px;
                padding: 12px 10px;
                width: 100%;
                min-width: 0;
            }
            
            .swap-button {
                width: 45px;
                height: 45px;
                font-size: 20px;
                margin: 8px auto;
            }
            
            .result-box {
                padding: 15px;
                margin-top: 15px;
            }
            
            .result-label {
                font-size: 12px;
            }
            
            .result-amount {
                font-size: 24px;
            }
            
            .result-rate {
                font-size: 11px;
            }
            
            .rate-info {
                padding: 12px;
                font-size: 12px;
                margin-top: 15px;
            }
            
            .currency-list {
                grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
                gap: 8px;
                margin-top: 15px;
            }
            
            .currency-item {
                padding: 8px 5px;
            }
            
            .currency-item .flag {
                font-size: 20px;
            }
            
            .currency-item .code {
                font-size: 11px;
            }
            
            .back-button {
                bottom: 10px;
                padding: 12px 25px;
                font-size: 14px;
                border-radius: 20px;
            }
        }
        
        @media (max-width: 400px) {
            .logo {
                font-size: 28px;
            }
            
            .header h1 {
                font-size: 18px;
            }
            
            .container {
                padding: 15px 10px;
            }
            
            .currency-selector {
                flex-direction: column;
                align-items: stretch;
            }
            
            .flag-select {
                width: 45px;
                height: 40px;
            }
            
            .currency-code {
                font-size: 14px;
            }
            
            .amount-input {
                font-size: 16px;
                padding: 10px;
            }
            
            .currency-list {
                grid-template-columns: repeat(auto-fill, minmax(55px, 1fr));
                gap: 6px;
            }
        }
        
        /* Modal responsive */
        @media (max-width: 600px) {
            #currencyModalList {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr)) !important;
                gap: 8px !important;
            }
        }
        
        @media (max-width: 400px) {
            #currencyModalList {
                grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)) !important;
                gap: 6px !important;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">JABOZ</div>
        <h1>üí± ƒê·ªïi Ti·ªÅn T·ªá</h1>
    </div>
    
    <div class="container">
        <div class="exchange-box">
            <div class="currency-selector">
                <div class="flag-select" id="fromFlag" data-type="from">
                    <div class="flag-icon" id="fromFlagIcon">üá∫üá∏</div>
                </div>
                <span class="currency-code" id="fromCode">USD</span>
                <input type="number" class="amount-input" id="fromAmount" value="1" placeholder="0" min="0" step="0.01">
            </div>
            
            <button class="swap-button" id="swapButton">‚áÖ</button>
            
            <div class="currency-selector">
                <div class="flag-select" id="toFlag" data-type="to">
                    <div class="flag-icon" id="toFlagIcon">üáªüá≥</div>
                </div>
                <span class="currency-code" id="toCode">VND</span>
                <input type="number" class="amount-input" id="toAmount" value="" placeholder="0" readonly>
            </div>
        </div>
        
        <div class="result-box" id="resultBox" style="display: none;">
            <div class="result-label">K·∫øt qu·∫£ chuy·ªÉn ƒë·ªïi</div>
            <div class="result-amount" id="resultAmount">0</div>
            <div class="result-rate" id="resultRate"></div>
        </div>
        
        <div class="rate-info" id="rateInfo">
            <div class="loading">ƒêang t·∫£i t·ª∑ gi√°...</div>
        </div>
        
        <div class="currency-list" id="currencyList"></div>
    </div>
    
    <a href="../index.html" class="back-button">üè† Trang Ch·ªß</a>
    
    <script>
        // Danh s√°ch c√°c lo·∫°i ti·ªÅn t·ªá v·ªõi c·ªù v√† t√™n
        const currencies = {
            VND: { flag: 'üáªüá≥', name: 'Vi·ªát Nam ƒê·ªìng' },
            USD: { flag: 'üá∫üá∏', name: 'US Dollar' },
            EUR: { flag: 'üá™üá∫', name: 'Euro' },
            KRW: { flag: 'üá∞üá∑', name: 'Won H√†n Qu·ªëc' },
            JPY: { flag: 'üáØüáµ', name: 'Y√™n Nh·∫≠t' },
            CNY: { flag: 'üá®üá≥', name: 'Nh√¢n D√¢n T·ªá' },
            GBP: { flag: 'üá¨üáß', name: 'B·∫£ng Anh' },
            AUD: { flag: 'üá¶üá∫', name: 'ƒê√¥ la √öc' },
            CAD: { flag: 'üá®üá¶', name: 'ƒê√¥ la Canada' },
            SGD: { flag: 'üá∏üá¨', name: 'ƒê√¥ la Singapore' },
            THB: { flag: 'üáπüá≠', name: 'B·∫°t Th√°i' },
            MYR: { flag: 'üá≤üáæ', name: 'Ringgit Malaysia' },
            IDR: { flag: 'üáÆüá©', name: 'Rupiah Indonesia' },
            PHP: { flag: 'üáµüá≠', name: 'Peso Philippines' },
            INR: { flag: 'üáÆüá≥', name: 'Rupee ·∫§n ƒê·ªô' }
        };
        
        // T·ª∑ gi√° m·∫∑c ƒë·ªãnh (s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t t·ª´ API - t·ª∑ gi√° tham kh·∫£o)
        // L∆∞u √Ω: T·ª∑ gi√° th·ª±c t·∫ø khi giao d·ªãch c√≥ th·ªÉ cao h∆°n do spread v√† ph√≠
        let exchangeRates = {
            USD: 1,
            VND: 25200,  // T·ª∑ gi√° tham kh·∫£o, t·ª∑ gi√° th·ª±c t·∫ø c√≥ th·ªÉ ~25,300-25,400
            EUR: 0.93,
            KRW: 1350,
            JPY: 151,
            CNY: 7.25,
            GBP: 0.80,
            AUD: 1.53,
            CAD: 1.37,
            SGD: 1.35,
            THB: 36.0,
            MYR: 4.75,
            IDR: 15800,
            PHP: 56.5,
            INR: 83.5
        };
        
        // Bi·∫øn l∆∞u lo·∫°i ti·ªÅn t·ªá hi·ªán t·∫°i
        let currentFromCurrency = 'USD';
        let currentToCurrency = 'VND';
        
        // Elements
        const fromFlag = document.getElementById('fromFlag');
        const toFlag = document.getElementById('toFlag');
        const fromAmount = document.getElementById('fromAmount');
        const toAmount = document.getElementById('toAmount');
        const fromFlagIcon = document.getElementById('fromFlagIcon');
        const toFlagIcon = document.getElementById('toFlagIcon');
        const fromCode = document.getElementById('fromCode');
        const toCode = document.getElementById('toCode');
        const swapButton = document.getElementById('swapButton');
        const resultBox = document.getElementById('resultBox');
        const resultAmount = document.getElementById('resultAmount');
        const resultRate = document.getElementById('resultRate');
        const rateInfo = document.getElementById('rateInfo');
        const currencyList = document.getElementById('currencyList');
        
        // T·∫°o danh s√°ch currency (quick select cho to currency)
        function createCurrencyList() {
            currencyList.innerHTML = '';
            Object.keys(currencies).forEach(code => {
                const item = document.createElement('div');
                item.className = 'currency-item';
                item.innerHTML = `
                    <div class="flag">${currencies[code].flag}</div>
                    <div class="code">${code}</div>
                `;
                item.addEventListener('click', () => {
                    currentToCurrency = code;
                    updateFlagIcon('to');
                    updateCode('to');
                    convert();
                });
                currencyList.appendChild(item);
            });
        }
        
        // C·∫≠p nh·∫≠t c·ªù
        function updateFlagIcon(type) {
            const currency = type === 'from' ? currentFromCurrency : currentToCurrency;
            const icon = type === 'from' ? fromFlagIcon : toFlagIcon;
            icon.textContent = currencies[currency]?.flag || 'üè≥Ô∏è';
        }
        
        // C·∫≠p nh·∫≠t m√£ ti·ªÅn t·ªá
        function updateCode(type) {
            const currency = type === 'from' ? currentFromCurrency : currentToCurrency;
            const codeEl = type === 'from' ? fromCode : toCode;
            codeEl.textContent = currency;
        }
        
        // M·ªü modal ch·ªçn currency
        let currentSelectingType = null;
        const currencyModal = document.createElement('div');
        currencyModal.style.cssText = 'display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;';
        currencyModal.style.display = 'none';
        currencyModal.style.position = 'fixed';
        currencyModal.style.top = '0';
        currencyModal.style.left = '0';
        currencyModal.style.width = '100%';
        currencyModal.style.height = '100%';
        currencyModal.style.background = 'rgba(0,0,0,0.5)';
        currencyModal.style.zIndex = '2000';
        currencyModal.style.justifyContent = 'center';
        currencyModal.style.alignItems = 'center';
        currencyModal.innerHTML = `
            <div style="background: white; border-radius: 20px; padding: 20px; max-width: 90%; max-height: 80vh; overflow-y: auto; width: 400px;">
                <h3 style="margin: 0 0 20px 0; text-align: center; color: #667eea;">Ch·ªçn lo·∫°i ti·ªÅn t·ªá</h3>
                <div id="currencyModalList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 10px;"></div>
                <button id="closeCurrencyModal" style="margin-top: 20px; width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer;">ƒê√≥ng</button>
            </div>
        `;
        document.body.appendChild(currencyModal);
        
        function openCurrencyModal(type) {
            currentSelectingType = type;
            const modalList = document.getElementById('currencyModalList');
            modalList.innerHTML = '';
            
            Object.keys(currencies).forEach(code => {
                const item = document.createElement('div');
                item.style.cssText = 'padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; background: white;';
                item.innerHTML = `
                    <div style="font-size: 32px; margin-bottom: 5px;">${currencies[code].flag}</div>
                    <div style="font-size: 14px; font-weight: 600;">${code}</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">${currencies[code].name}</div>
                `;
                item.addEventListener('click', () => {
                    if (type === 'from') {
                        currentFromCurrency = code;
                    } else {
                        currentToCurrency = code;
                    }
                    updateFlagIcon(type);
                    updateCode(type);
                    convert();
                    currencyModal.style.display = 'none';
                });
                item.addEventListener('mouseenter', () => {
                    item.style.borderColor = '#667eea';
                    item.style.transform = 'translateY(-2px)';
                    item.style.boxShadow = '0 4px 12px rgba(102, 126, 234, 0.2)';
                });
                item.addEventListener('mouseleave', () => {
                    item.style.borderColor = '#e0e0e0';
                    item.style.transform = 'translateY(0)';
                    item.style.boxShadow = 'none';
                });
                modalList.appendChild(item);
            });
            
            currencyModal.style.display = 'flex';
            currencyModal.style.flexDirection = 'column';
        }
        
        document.getElementById('closeCurrencyModal').addEventListener('click', () => {
            currencyModal.style.display = 'none';
        });
        
        currencyModal.addEventListener('click', (e) => {
            if (e.target === currencyModal) {
                currencyModal.style.display = 'none';
            }
        });
        
        // Click v√†o flag ƒë·ªÉ ch·ªçn currency
        fromFlag.addEventListener('click', () => openCurrencyModal('from'));
        toFlag.addEventListener('click', () => openCurrencyModal('to'));
        
        // Chuy·ªÉn ƒë·ªïi ti·ªÅn t·ªá
        function convert() {
            const from = currentFromCurrency;
            const to = currentToCurrency;
            const amount = parseFloat(fromAmount.value) || 0;
            
            if (amount <= 0) {
                toAmount.value = '';
                resultBox.style.display = 'none';
                return;
            }
            
            // Chuy·ªÉn ƒë·ªïi qua USD l√†m trung gian
            const fromRate = exchangeRates[from] || 1;
            const toRate = exchangeRates[to] || 1;
            
            // Chuy·ªÉn sang USD tr∆∞·ªõc
            const amountInUSD = amount / fromRate;
            // R·ªìi chuy·ªÉn sang ƒë·ªìng ti·ªÅn ƒë√≠ch
            const result = amountInUSD * toRate;
            
            // L√†m tr√≤n k·∫øt qu·∫£
            const decimals = to === 'JPY' || to === 'KRW' || to === 'VND' || to === 'IDR' ? 0 : 2;
            const formattedResult = result.toFixed(decimals);
            
            toAmount.value = formattedResult;
            
            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            resultBox.style.display = 'block';
            resultAmount.textContent = formatNumber(formattedResult) + ' ' + to;
            
            // T·ª∑ gi√°
            const rate = (toRate / fromRate).toFixed(decimals);
            resultRate.textContent = `1 ${from} = ${formatNumber(rate)} ${to}`;
            
            // C·∫≠p nh·∫≠t th√¥ng tin t·ª∑ gi√°
            updateRateInfo();
        }
        
        // ƒê·ªãnh d·∫°ng s·ªë
        function formatNumber(num) {
            const numStr = num.toString();
            if (numStr.includes('.')) {
                const [intPart, decPart] = numStr.split('.');
                return parseInt(intPart).toLocaleString('vi-VN') + '.' + decPart;
            }
            return parseInt(numStr).toLocaleString('vi-VN');
        }
        
        // C·∫≠p nh·∫≠t th√¥ng tin t·ª∑ gi√°
        function updateRateInfo() {
            const from = currentFromCurrency;
            const to = currentToCurrency;
            const fromRate = exchangeRates[from] || 1;
            const toRate = exchangeRates[to] || 1;
            const rate = (toRate / fromRate);
            const decimals = to === 'JPY' || to === 'KRW' || to === 'VND' || to === 'IDR' ? 0 : 4;
            
            rateInfo.innerHTML = `
                <strong>T·ª∑ gi√° tham kh·∫£o:</strong><br>
                1 ${from} = ${rate.toFixed(decimals)} ${to}<br>
                <small style="color: #999;">C·∫≠p nh·∫≠t: ${new Date().toLocaleString('vi-VN')}</small><br>
                <small style="color: #f39c12; font-size: 11px;">‚ö†Ô∏è <strong>L∆∞u √Ω:</strong> ƒê√¢y l√† t·ª∑ gi√° tham kh·∫£o t·ª´ API. T·ª∑ gi√° th·ª±c t·∫ø khi giao d·ªãch c√≥ th·ªÉ cao h∆°n do spread v√† ph√≠ c·ªßa ng√¢n h√†ng/t·ªï ch·ª©c t√†i ch√≠nh.</small>
            `;
        }
        
        // ƒê·ªïi ch·ªó
        swapButton.addEventListener('click', () => {
            const tempCurrency = currentFromCurrency;
            const tempAmount = fromAmount.value;
            
            currentFromCurrency = currentToCurrency;
            currentToCurrency = tempCurrency;
            
            fromAmount.value = toAmount.value;
            toAmount.value = tempAmount;
            
            updateFlagIcon('from');
            updateFlagIcon('to');
            updateCode('from');
            updateCode('to');
            
            convert();
        });
        
        fromAmount.addEventListener('input', convert);
        
        // Kh·ªüi t·∫°o
        updateFlagIcon('from');
        updateFlagIcon('to');
        updateCode('from');
        updateCode('to');
        createCurrencyList();
        
        // T·∫£i t·ª∑ gi√° t·ª´ API (s·ª≠ d·ª•ng exchangerate-api.com - API ph·ªï bi·∫øn nh·∫•t)
        async function fetchExchangeRates() {
            try {
                // S·ª≠ d·ª•ng API mi·ªÖn ph√≠ - exchangerate-api.com (API t·ª∑ gi√° qu·ªëc t·∫ø ph·ªï bi·∫øn nh·∫•t)
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
                const data = await response.json();
                
                if (data && data.rates) {
                    // C·∫≠p nh·∫≠t t·ª∑ gi√° t·ª´ API
                    let updatedCount = 0;
                    Object.keys(currencies).forEach(code => {
                        if (data.rates[code]) {
                            exchangeRates[code] = data.rates[code];
                            updatedCount++;
                        }
                    });
                    
                    // Hi·ªÉn th·ªã th√¥ng b√°o c·∫≠p nh·∫≠t
                    const updateTime = new Date().toLocaleString('vi-VN');
                    rateInfo.innerHTML = `
                        <div class="loading" style="color: #27ae60;">
                            ‚úÖ T·ª∑ gi√° tham kh·∫£o ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t! (${updatedCount} lo·∫°i ti·ªÅn t·ªá)<br>
                            <small style="color: #999; font-size: 11px;">C·∫≠p nh·∫≠t l√∫c: ${updateTime}</small><br>
                            <small style="color: #f39c12; font-size: 10px;">‚ö†Ô∏è T·ª∑ gi√° th·ª±c t·∫ø c√≥ th·ªÉ cao h∆°n do spread v√† ph√≠</small>
                        </div>
                    `;
                    
                    setTimeout(() => {
                        convert();
                        updateRateInfo();
                    }, 500);
                } else {
                    throw new Error('Kh√¥ng th·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ API');
                }
            } catch (error) {
                console.error('L·ªói khi t·∫£i t·ª∑ gi√°:', error);
                // Th·ª≠ API d·ª± ph√≤ng - exchangerate.host (mi·ªÖn ph√≠, kh√¥ng c·∫ßn key)
                try {
                    const backupResponse = await fetch('https://api.exchangerate.host/latest?base=USD');
                    const backupData = await backupResponse.json();
                    if (backupData && backupData.rates && backupData.success !== false) {
                        let backupCount = 0;
                        Object.keys(currencies).forEach(code => {
                            if (backupData.rates[code]) {
                                exchangeRates[code] = backupData.rates[code];
                                backupCount++;
                            }
                        });
                        rateInfo.innerHTML = `
                            <div style="color: #27ae60;">
                                ‚úÖ T·ª∑ gi√° ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t t·ª´ ngu·ªìn d·ª± ph√≤ng! (${backupCount} lo·∫°i ti·ªÅn t·ªá)<br>
                                <small style="color: #999;">C·∫≠p nh·∫≠t: ${new Date().toLocaleString('vi-VN')}</small>
                            </div>
                        `;
                        convert();
                        updateRateInfo();
                        return;
                    }
                } catch (backupError) {
                    console.error('L·ªói API d·ª± ph√≤ng:', backupError);
                }
                
                rateInfo.innerHTML = `
                    <div style="color: #f39c12;">
                        ‚ö†Ô∏è Kh√¥ng th·ªÉ t·∫£i t·ª∑ gi√° m·ªõi. ƒêang s·ª≠ d·ª•ng t·ª∑ gi√° m·∫∑c ƒë·ªãnh.<br>
                        <small style="font-size: 11px;">Th·ª≠ l·∫°i sau 1 ph√∫t...</small>
                    </div>
                `;
                convert();
                updateRateInfo();
            }
        }
        
        // T·∫£i t·ª∑ gi√° khi trang load
        fetchExchangeRates();
        
        // T·ª± ƒë·ªông c·∫≠p nh·∫≠t t·ª∑ gi√° m·ªói 1 ph√∫t (60000ms)
        setInterval(() => {
            fetchExchangeRates();
        }, 60000);
        
        // T·ª± ƒë·ªông chuy·ªÉn ƒë·ªïi khi load
        setTimeout(convert, 1000);
    </script>
</body>
</html>
