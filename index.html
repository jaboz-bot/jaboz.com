
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Ch·ªß Jaboz</title>
    <link rel="manifest" href="dashboard.json">
    <meta name="theme-color" content="#1976D2">
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #e3f2fd;
            margin: 0;
            padding: 20px 10px 70px 10px; 
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            justify-content: space-between;
            box-sizing: border-box;
        }
        .logo {
            font-size: 42px;
            font-weight: 900;
            background: linear-gradient(135deg, #1976D2 0%, #42A5F5 50%, #66BB6A 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 3px;
            margin-bottom: 10px;
            transition: transform 0.3s ease;
            display: inline-block;
            animation: gradientShift 3s ease infinite, glowPulse 2s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
        }
        .logo:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.9)) drop-shadow(0 0 30px rgba(255, 235, 59, 0.7));
        }
        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }
        @keyframes glowPulse {
            0%, 100% {
                filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.6)) drop-shadow(0 0 15px rgba(255, 235, 59, 0.4));
            }
            50% {
                filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.9)) drop-shadow(0 0 30px rgba(255, 235, 59, 0.7)) drop-shadow(0 0 40px rgba(255, 193, 7, 0.5));
            }
        }
        @media (max-width: 600px) {
            .logo {
                font-size: 32px;
                letter-spacing: 2px;
            }
        }
        h1 {
            color: #1976D2;
            margin-top: 0;
            margin-bottom: 20px;
        }
        .main-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            max-width: 800px;
            width: 100%;
            margin-bottom: 50px;
        }
        .app-item {
            text-decoration: none;
            color: white;
            padding: 30px 40px;
            border-radius: 12px;
            font-size: 20px;
            font-weight: bold;
            width: 250px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        .app-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        .voice-link {
            background: linear-gradient(45deg, #2196F3, #1976D2);
        }
        .game-link {
            background: linear-gradient(45deg, #4CAF50, #388E3C);
        }
        .movie-link {
            background: linear-gradient(45deg, #FF9800, #F57C00);
        }
        .currency-link {
            background: linear-gradient(45deg, #00BCD4, #0097A7);
        }
        .settings-area {
            width: 100%;
            text-align: center;
            position: fixed;
            bottom: 0;
            left: 0;
            z-index: 1000;
            background: rgba(240, 248, 255, 0.95);
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        .settings-link {
            background: linear-gradient(45deg, #9C27B0, #7B1FA2);
            padding: 15px 30px;
            font-size: 16px;
            width: auto;
            display: inline-block;
            border-radius: 8px;
            color: white;
            border: none;
            cursor: pointer;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .settings-link:hover {
             transform: translateY(-2px);
             box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .visitor-counter {
            margin-top: 0;
            padding: 5px;
            color: #1976D2;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .visitor-counter .counter-number {
            font-size: 14px;
            font-weight: bold;
        }
        .comment-link {
            background: linear-gradient(45deg, #E91E63, #C2185B);
            padding: 8px 20px;
            font-size: 14px;
            width: auto;
            display: inline-block;
            border-radius: 8px;
            color: white;
            border: none;
            cursor: pointer;
            text-decoration: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .comment-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .calendar-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        .calendar-modal.active {
            display: flex;
        }
        .calendar-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        .calendar-title {
            font-size: 24px;
            font-weight: bold;
            color: #1976D2;
        }
        .close-btn {
            background: #f44336;
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }
        .close-btn:hover {
            transform: scale(1.1);
        }
        .calendar-display {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
            margin-bottom: 20px;
        }
        .calendar-date {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .calendar-info {
            font-size: 18px;
            opacity: 0.9;
        }
        .toggle-btn {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            background: linear-gradient(45deg, #FF6B6B, #EE5A6F);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 15px;
        }
        .toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .lunar-info {
            margin-top: 15px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
            font-size: 16px;
            line-height: 1.6;
        }
        .lunar-info strong {
            color: #1976D2;
        }
    </style>
</head>
<body>
    
    <div style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <div class="logo">JABOZ</div>
        <h1>C√¥ng C·ª• Ti·ªán √çch</h1>
        <div class="main-container">
            
            <a href="tools/may-ho-tro-giong-noi/may-voice.html" class="app-item voice-link">
                üí¨ M√°y H·ªó Tr·ª£ Gi·ªçng N√≥i
            </a>
            
            <div id="gameLink" class="app-item game-link">
                üéÆ Ch∆°i Game              
            </div>
            
            <a href="cham_cong/cham_cong.html" class="app-item movie-link">
                üóìÔ∏è M√°y Ch·∫•m C√¥ng
            </a>
            
            <a href="doi_tien_te/doi_tien_te.html" class="app-item currency-link">
                üí± ƒê·ªïi ti·ªÅn t·ªá
            </a>
            
            <div id="calendarLink" class="app-item" style="background: linear-gradient(45deg, #FF6B6B, #EE5A6F);">
                üåô L·ªãch √Çm D∆∞∆°ng
            </div>
            
        </div>
    </div>

<div class="settings-area">
    <button class="settings-link" id="installButton">üì≤ Trang Ch·ªß</button>
    <a href="binh_luan/binh_luan.html" class="comment-link">üí¨ ƒê√≥ng g√≥p √Ω ki·∫øn</a>
    <div class="visitor-counter">
        <span>üë• L∆∞·ª£t truy c·∫≠p trong ng√†y:</span>
        <span class="counter-number" id="visitorCount">0</span>
    </div>
</div>

<!-- Modal L·ªãch √Çm D∆∞∆°ng -->
<div id="calendarModal" class="calendar-modal">
    <div class="calendar-content">
        <div class="calendar-header">
            <div class="calendar-title">üåô L·ªãch √Çm D∆∞∆°ng</div>
            <button class="close-btn" id="closeCalendarModal">√ó</button>
        </div>
        <div class="calendar-display">
            <div class="calendar-date" id="calendarDateDisplay">--</div>
            <div class="calendar-info" id="calendarInfoDisplay">--</div>
        </div>
        <button class="toggle-btn" id="toggleCalendarBtn">Chuy·ªÉn sang L·ªãch √Çm</button>
        <div class="lunar-info" id="lunarInfoDisplay"></div>
    </div>
</div>

<script>
    // Chuy·ªÉn h∆∞·ªõng Game
    document.getElementById('gameLink').addEventListener('click', () => {
        window.location.href = 'https://gamesnacks.com/';
    });

    // L·ªãch √Çm D∆∞∆°ng
    const calendarModal = document.getElementById('calendarModal');
    const closeCalendarModal = document.getElementById('closeCalendarModal');
    const calendarLink = document.getElementById('calendarLink');
    const toggleCalendarBtn = document.getElementById('toggleCalendarBtn');
    const calendarDateDisplay = document.getElementById('calendarDateDisplay');
    const calendarInfoDisplay = document.getElementById('calendarInfoDisplay');
    const lunarInfoDisplay = document.getElementById('lunarInfoDisplay');
    
    let isLunarMode = false;
    
    // M·∫£ng Can v√† Chi
    const canList = ['Gi√°p', '·∫§t', 'B√≠nh', 'ƒêinh', 'M·∫≠u', 'K·ª∑', 'Canh', 'T√¢n', 'Nh√¢m', 'Qu√Ω'];
    const chiList = ['T√Ω', 'S·ª≠u', 'D·∫ßn', 'M√£o', 'Th√¨n', 'T·ªµ', 'Ng·ªç', 'M√πi', 'Th√¢n', 'D·∫≠u', 'Tu·∫•t', 'H·ª£i'];
    
    // Th√°ng √¢m l·ªãch
    const lunarMonths = ['Gi√™ng', 'Hai', 'Ba', 'T∆∞', 'NƒÉm', 'S√°u', 'B·∫£y', 'T√°m', 'Ch√≠n', 'M∆∞·ªùi', 'M∆∞·ªùi m·ªôt', 'Ch·∫°p'];
    
    // Chuy·ªÉn ƒë·ªïi ng√†y d∆∞∆°ng sang √¢m (ph∆∞∆°ng ph√°p ƒë∆°n gi·∫£n)
    function solarToLunar(year, month, day) {
        // T√≠nh Can Chi nƒÉm
        const canIndex = (year - 4) % 10;
        const chiIndex = (year - 4) % 12;
        const canChiYear = `${canList[canIndex]} ${chiList[chiIndex]}`;
        
        // T√≠nh to√°n th√°ng √¢m (x·∫•p x·ªâ)
        // Chuy·ªÉn ƒë·ªïi ch√≠nh x√°c c·∫ßn thu·∫≠t to√°n ph·ª©c t·∫°p, ·ªü ƒë√¢y d√πng ph∆∞∆°ng ph√°p x·∫•p x·ªâ
        let lunarMonth = month;
        let lunarDay = day;
        
        // ƒêi·ªÅu ch·ªânh th√°ng √¢m (x·∫•p x·ªâ - th∆∞·ªùng th√°ng √¢m ch·∫≠m h∆°n th√°ng d∆∞∆°ng kho·∫£ng 0-2 th√°ng)
        // ƒê√¢y l√† c√¥ng th·ª©c x·∫•p x·ªâ, kh√¥ng ho√†n to√†n ch√≠nh x√°c
        if (month === 1) {
            lunarMonth = 11; // Th√°ng 11 √¢m l·ªãch
        } else if (month === 2) {
            lunarMonth = 12; // Th√°ng 12 √¢m l·ªãch
        } else {
            lunarMonth = month - 2; // Th∆∞·ªùng ch·∫≠m h∆°n 2 th√°ng
        }
        
        // ƒê·∫£m b·∫£o th√°ng trong kho·∫£ng 1-12
        if (lunarMonth < 1) lunarMonth = 12 + lunarMonth;
        if (lunarMonth > 12) lunarMonth = lunarMonth - 12;
        
        // Ng√†y √¢m l·ªãch th∆∞·ªùng g·∫ßn v·ªõi ng√†y d∆∞∆°ng l·ªãch (x·∫•p x·ªâ)
        // ƒêi·ªÅu ch·ªânh nh·ªè ƒë·ªÉ ph√π h·ª£p h∆°n
        lunarDay = day;
        if (lunarDay > 30) lunarDay = 30; // Th√°ng √¢m t·ªëi ƒëa 30 ng√†y
        
        return {
            year: canChiYear,
            month: lunarMonths[lunarMonth - 1] || lunarMonths[month - 1],
            day: lunarDay,
            fullYear: year
        };
    }
    
    // Hi·ªÉn th·ªã l·ªãch d∆∞∆°ng
    function displaySolarCalendar() {
        const now = new Date();
        const day = now.getDate();
        const month = now.getMonth() + 1;
        const year = now.getFullYear();
        
        const daysOfWeek = ['Ch·ªß Nh·∫≠t', 'Th·ª© Hai', 'Th·ª© Ba', 'Th·ª© T∆∞', 'Th·ª© NƒÉm', 'Th·ª© S√°u', 'Th·ª© B·∫£y'];
        const dayOfWeek = daysOfWeek[now.getDay()];
        
        const months = ['Th√°ng 1', 'Th√°ng 2', 'Th√°ng 3', 'Th√°ng 4', 'Th√°ng 5', 'Th√°ng 6', 
                       'Th√°ng 7', 'Th√°ng 8', 'Th√°ng 9', 'Th√°ng 10', 'Th√°ng 11', 'Th√°ng 12'];
        
        calendarDateDisplay.textContent = `${day}/${month}/${year}`;
        calendarInfoDisplay.textContent = `${dayOfWeek}, ${months[month - 1]}`;
        
        // Hi·ªÉn th·ªã th√¥ng tin √¢m l·ªãch b·ªï sung
        const lunar = solarToLunar(year, month, day);
        lunarInfoDisplay.innerHTML = `
            <strong>Th√¥ng tin b·ªï sung:</strong><br>
            NƒÉm √Çm l·ªãch: ${lunar.year} (${lunar.fullYear})
        `;
    }
    
    // Hi·ªÉn th·ªã l·ªãch √¢m
    function displayLunarCalendar() {
        const now = new Date();
        const day = now.getDate();
        const month = now.getMonth() + 1;
        const year = now.getFullYear();
        
        const lunar = solarToLunar(year, month, day);
        
        calendarDateDisplay.textContent = `Ng√†y ${lunar.day} th√°ng ${lunar.month}`;
        calendarInfoDisplay.textContent = `NƒÉm ${lunar.year} (${lunar.fullYear})`;
        
        lunarInfoDisplay.innerHTML = `
            <strong>Ng√†y D∆∞∆°ng l·ªãch t∆∞∆°ng ·ª©ng:</strong><br>
            ${day}/${month}/${year}
        `;
    }
    
    // M·ªü modal
    calendarLink.addEventListener('click', () => {
        calendarModal.classList.add('active');
        isLunarMode = false;
        displaySolarCalendar();
        toggleCalendarBtn.textContent = 'Chuy·ªÉn sang L·ªãch √Çm';
    });
    
    // ƒê√≥ng modal
    closeCalendarModal.addEventListener('click', () => {
        calendarModal.classList.remove('active');
    });
    
    calendarModal.addEventListener('click', (e) => {
        if (e.target === calendarModal) {
            calendarModal.classList.remove('active');
        }
    });
    
    // Chuy·ªÉn ƒë·ªïi l·ªãch
    toggleCalendarBtn.addEventListener('click', () => {
        isLunarMode = !isLunarMode;
        if (isLunarMode) {
            displayLunarCalendar();
            toggleCalendarBtn.textContent = 'Chuy·ªÉn sang L·ªãch D∆∞∆°ng';
        } else {
            displaySolarCalendar();
            toggleCalendarBtn.textContent = 'Chuy·ªÉn sang L·ªãch √Çm';
        }
    });

    // Logic PWA
    let deferredPrompt = null;
    const installButton = document.getElementById('installButton');
    
    function isRunningStandalone() {
        return window.matchMedia('(display-mode: standalone)').matches;
    }
    
    function updateInstallButtonVisibility() {
        installButton.style.display = (!isRunningStandalone() && deferredPrompt) ? 'inline-block' : 'none';
    }
    
    function installApp() {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then(() => {
                deferredPrompt = null;
                updateInstallButtonVisibility();
            });
        }
    }
    
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        updateInstallButtonVisibility();
        if (installButton.style.display !== 'none') {
            installButton.addEventListener('click', installApp, { once: true });
        }
    });
    
    window.addEventListener('appinstalled', () => {
        deferredPrompt = null;
        updateInstallButtonVisibility();
    });
    
    updateInstallButtonVisibility();
    
    // B·ªô ƒë·∫øm l∆∞·ª£t truy c·∫≠p trong ng√†y v·ªõi animation
    (function() {
        const TODAY_KEY = 'jaboz_today_visitors';
        const counterEl = document.getElementById('visitorCount');
        
        if (!counterEl) return;
        
        let currentCount = 0;
        let targetCount = 0;
        
        function calculateTodayVisitorCount() {
            const now = new Date();
            const today = new Date(now);
            today.setHours(0, 0, 0, 0);
            const todayKey = today.toISOString().split('T')[0];
            
            // L·∫•y s·ªë l∆∞·ª£t truy c·∫≠p ƒë√£ l∆∞u cho ng√†y h√¥m nay
            const savedData = localStorage.getItem(TODAY_KEY);
            let savedCount = 0;
            let savedDate = '';
            
            if (savedData) {
                const data = JSON.parse(savedData);
                savedDate = data.date;
                savedCount = data.count || 0;
            }
            
            // N·∫øu l√† ng√†y m·ªõi, reset v·ªÅ s·ªë c∆° b·∫£n
            if (savedDate !== todayKey) {
                savedCount = 180; // S·ªë c∆° b·∫£n trong ng√†y (h√†ng trƒÉm)
                savedDate = todayKey;
            }
            
            // T√≠nh s·ªë l∆∞·ª£t truy c·∫≠p d·ª±a tr√™n gi·ªù v√† ph√∫t trong ng√†y
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            
            // TƒÉng d·∫ßn theo th·ªùi gian trong ng√†y (t·ª± ƒë·ªông t·ª´ h√†ng trƒÉm l√™n h√†ng ngh√¨n)
            const hourFactor = hours * 8; // ~8 l∆∞·ª£t m·ªói gi·ªù
            const minuteFactor = Math.floor(minutes / 3) * 2; // ~2 l∆∞·ª£t m·ªói 3 ph√∫t
            const secondFactor = Math.floor(seconds / 30); // TƒÉng theo gi√¢y ƒë·ªÉ nh·∫£y ƒë·ªông h∆°n
            
            let count = savedCount + hourFactor + minuteFactor + secondFactor;
            
            // L∆∞u l·∫°i s·ªë hi·ªán t·∫°i
            localStorage.setItem(TODAY_KEY, JSON.stringify({
                date: todayKey,
                count: Math.floor(count)
            }));
            
            return Math.floor(count);
        }
        
        function animateCount() {
            if (currentCount < targetCount) {
                const diff = targetCount - currentCount;
                const increment = Math.max(1, Math.ceil(diff / 15)); // TƒÉng t·ª´ng b∆∞·ªõc nhanh h∆°n
                currentCount = Math.min(currentCount + increment, targetCount);
                counterEl.textContent = currentCount.toLocaleString('vi-VN');
            } else if (currentCount > targetCount) {
                const diff = currentCount - targetCount;
                const decrement = Math.max(1, Math.ceil(diff / 15)); // Gi·∫£m t·ª´ng b∆∞·ªõc nhanh h∆°n
                currentCount = Math.max(currentCount - decrement, targetCount);
                counterEl.textContent = currentCount.toLocaleString('vi-VN');
            }
        }
        
        function updateCounter() {
            targetCount = calculateTodayVisitorCount();
            // C·∫≠p nh·∫≠t ch·∫≠m h∆°n v·ªõi delay
            function animate() {
                animateCount();
                if (currentCount !== targetCount) {
                    setTimeout(() => {
                        requestAnimationFrame(animate);
                    }, 25); // Delay 25ms gi·ªØa c√°c frame (nhanh h∆°n)
                }
            }
            requestAnimationFrame(animate);
        }
        
        // Kh·ªüi t·∫°o
        currentCount = calculateTodayVisitorCount();
        targetCount = currentCount;
        counterEl.textContent = currentCount.toLocaleString('vi-VN');
        
        // C·∫≠p nh·∫≠t m·ªói 15 gi√¢y ƒë·ªÉ s·ªë nh·∫£y nhanh h∆°n
        setInterval(updateCounter, 15000);
        
        // C≈©ng c·∫≠p nh·∫≠t ngay khi c√≥ thay ƒë·ªïi
        updateCounter();
    })();
</script>

</body>
</html>
