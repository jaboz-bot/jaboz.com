<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>M√°y h·ªó tr·ª£ gi·ªçng n√≥i</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:#e3f2fd;margin:0;padding:0;text-align:center}
h1{margin:10px 0}
.locked-h1{position:fixed;top:30px;left:50%;transform:translateX(-50%)}
#buttonContainer{display:grid;gap:8px;padding:10px}
button{border:none;border-radius:8px;padding:10px 15px;font-size:16px;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,0.2)}
.btn{background:linear-gradient(45deg,#f44336,#e57373);color:#fff}
.play-btn{background:#fff}
.control-container{margin:15px 0}
.navigation-group{display:flex;justify-content:center;gap:10px;margin-top:10px}
.add-btn{margin-bottom:10px;background:#2196f3;color:#fff}
#unlock-btn{display:none;margin-top:15px}
#popup{position:absolute;background:#333;color:#fff;padding:6px 12px;border-radius:8px;opacity:0;transition:opacity .5s;font-size:15px;pointer-events:none}
#settingsArea{margin:10px 0}
#tts-info{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);font-size:14px;color:#555}
#textInput{padding:8px;border-radius:6px;border:1px solid #ccc;width:70%;box-shadow:0 2px 4px rgba(0,0,0,0.1)}
#clearText{margin-left:-30px;background:none;border:none;color:red;font-weight:bold;font-size:18px;cursor:pointer;box-shadow:0 0 0 rgba(0,0,0,0)}
</style>
</head>
<body>

<h1 id="mainTitle">M√°y h·ªó tr·ª£ gi·ªçng n√≥i</h1>

<div id="buttonContainer"></div>

<!-- Khu ƒëi·ªÅu khi·ªÉn -->
<div class="control-container" id="controlArea">
  <button class="btn add-btn" id="add-btn" onclick="addButton()">‚ûï Th√™m c√¢u m·ªõi</button>
  
  <div class="navigation-group">
    <button class="control-btn" onclick="moveSpeak(-1)">C√¢u tr∆∞·ªõc</button>
    <button class="control-btn" onclick="moveSpeak(0)">Ph√°t l·∫°i</button>
    <button class="control-btn" onclick="moveSpeak(1)">C√¢u sau</button>
  </div>

  <button class="btn" id="unlock-btn" onclick="toggleLock(false)">M·ªü kh√≥a giao di·ªán</button>
</div>

<!-- Khu nh·∫≠p vƒÉn b·∫£n -->
<div id="settingsArea">
  <input type="text" id="textInput" placeholder="Nh·∫≠p vƒÉn b·∫£n...">
  <button id="clearText" onclick="document.getElementById('textInput').value=''">√ó</button>
  <button class="btn" onclick="toggleLock(true)">üîí Kh√≥a giao di·ªán</button>
</div>

<div id="popup"></div>
<p id="tts-info">N·∫øu kh√¥ng th·∫•y √¢m thanh, h√£y b·∫≠t √¢m l∆∞·ª£ng v√† cho ph√©p tr√¨nh duy·ªát ph√°t ti·∫øng.</p>

<script>
let currentIndex=-1,lock=false;

// Hi·ªÉn th·ªã popup
function showPopup(msg,btn){
  const p=document.getElementById('popup');
  p.innerText=msg;p.style.opacity=1;p.style.display='block';
  if(!lock){
    const r=btn.getBoundingClientRect();
    p.style.top=(r.top-40+window.scrollY)+'px';
    p.style.left=(r.left+r.width/2-p.offsetWidth/2)+'px';
  } else {p.style.top='200px';p.style.left='50%';p.style.transform='translateX(-50%)';}
  setTimeout(()=>{p.style.opacity=0;setTimeout(()=>p.style.display='none',500)},2000);
}

// T·∫°o n√∫t m·∫´u
function loadButtons(){
  const b=document.getElementById('buttonContainer');
  const arr=['Xin ch√†o','B·∫°n kh·ªèe kh√¥ng?','Ch√∫c m·ªôt ng√†y t·ªët l√†nh'];
  b.innerHTML='';
  arr.forEach((t,i)=>{
    const btn=document.createElement('button');
    btn.className='play-btn';btn.innerText=t;
    btn.onclick=()=>{currentIndex=i;showPopup(t,btn);}
    b.appendChild(btn);
  });
}

function addButton(){
  const txt=document.getElementById('textInput').value.trim();
  if(!txt)return alert("Nh·∫≠p n·ªôi dung tr∆∞·ªõc!");
  const btn=document.createElement('button');
  btn.className='play-btn';btn.innerText=txt;
  btn.onclick=()=>showPopup(txt,btn);
  document.getElementById('buttonContainer').appendChild(btn);
  document.getElementById('textInput').value='';
}

function moveSpeak(d){
  const b=document.querySelectorAll('#buttonContainer button');
  if(!b.length)return;
  currentIndex+=d;if(currentIndex<0)currentIndex=b.length-1;
  if(currentIndex>=b.length)currentIndex=0;
  b[currentIndex].click();
}

// Kh√≥a / m·ªü kh√≥a
function toggleLock(v){
  lock=v;
  const cards=document.getElementById('buttonContainer'),
        addBtn=document.getElementById('add-btn'),
        settings=document.getElementById('settingsArea'),
        unlockBtn=document.getElementById('unlock-btn'),
        mainTitle=document.getElementById('mainTitle'),
        navGroup=document.querySelector('.navigation-group');
  if(v){
    cards.style.display='none';
    addBtn.style.display='none';
    settings.style.display='none';
    mainTitle.classList.add('locked-h1');
    navGroup.style.position='fixed';
    navGroup.style.top='50%';
    navGroup.style.left='50%';
    navGroup.style.transform='translate(-50%,-50%)';
    unlockBtn.style.display='flex';
  } else {
    cards.style.display='grid';
    addBtn.style.display='block';
    settings.style.display='block';
    mainTitle.classList.remove('locked-h1');
    navGroup.style.position='static';
    navGroup.style.transform='none';
    unlockBtn.style.display='none';
  }
}

window.onload=()=>loadButtons();
</script>

</body>
</html>
